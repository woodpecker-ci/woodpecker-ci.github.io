<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>Woodpecker CI Blog</title>
        <link>https://woodpecker-ci.org/blog</link>
        <description>Woodpecker CI Blog</description>
        <lastBuildDate>Sat, 28 Dec 2024 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[Woodpecker 3.0.0]]></title>
            <link>https://woodpecker-ci.org/blog/release-v300</link>
            <guid>https://woodpecker-ci.org/blog/release-v300</guid>
            <pubDate>Sat, 28 Dec 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Introducing Woodpecker 2.5.0]]></description>
            <content:encoded><![CDATA[<p>We are excited to announce the release of Woodpecker 3.0.0! Along with various cleanup improvements, you can now register your own agents as a user and replay pipelines directly from the server using cli exec.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="breaking-changes">Breaking Changes<a href="https://woodpecker-ci.org/blog/release-v300#breaking-changes" class="hash-link" aria-label="Direct link to Breaking Changes" title="Direct link to Breaking Changes">‚Äã</a></h2>
<p>To enhance the usability of Woodpecker and comply with evolving security standards, we periodically implement migrations. While we strive to minimize changes, some adjustments are essential for an improved user experience.
We acknowledge that this release includes a significant number of changes, many of which require users to update their pipeline definitions. We understand that this can be a tedious task, especially when managing multiple repositories and pipelines.
Rest assured that each modification was carefully considered and thoroughly discussed, with specific reasoning behind every decision.</p>
<p>A substantial portion of these updates aims to transition away from outdated and suboptimal Drone definitions. Your patience and understanding as we implement these necessary changes are greatly appreciated. If you encounter any major issues during your migration to a new version, please don't hesitate to reach out. The Woodpecker maintainers are always eager to reassess and improve our updates based on your feedback.</p>
<p>Security has been a primary focus in this major release. In addition to patching known vulnerabilities (which have also been backported to v2 releases), we have enhanced the secrets handling mechanism to prevent accidental leaks and simplify the process of keeping sensitive information fully encrypted.</p>
<p>For a complete list of migration steps, please refer to the <a href="https://woodpecker-ci.org/migrations">migration guide</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="from_secret-as-the-powerful-replacement-for-the-secrets-keyword"><code>from_secret:</code> as the powerful replacement for the <code>secrets:</code> keyword<a href="https://woodpecker-ci.org/blog/release-v300#from_secret-as-the-powerful-replacement-for-the-secrets-keyword" class="hash-link" aria-label="Direct link to from_secret-as-the-powerful-replacement-for-the-secrets-keyword" title="Direct link to from_secret-as-the-powerful-replacement-for-the-secrets-keyword">‚Äã</a></h3>
<p>Specifically, the <code>secrets:</code> keyword has been deprecated in favor of a more flexible (and secure) way to specify secrets: <code>from_secret:</code>.
This new approach provides more flexibility (by using different names for the source and destination secrets) and ensures a safe internal secret parsing through a unified engine.
Because secrets defined via <code>secrets:</code> were simple env vars in the end, this change also removes potential confusion about the differences between values specified in <code>environment:</code> and <code>secrets</code>.
Now, both are defined in <code>environment:</code> using an expressive syntax:</p>
<div class="language-yaml codeBlockContainer_pg4u theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_NVc0"><pre tabindex="0" class="prism-code language-yaml codeBlock_welW thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_gu5P"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> echo "The secret is $TOKEN_ENV"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">TOKEN_ENV</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">from_secret</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> SECRET_TOKEN</span><br></span></code></pre><div class="buttonGroup_VWNV"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Pad9" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_CXDe"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_lkKT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="register-your-own-agents-for-users-or-organizations-3539">Register Your Own Agents for Users or Organizations <a href="https://github.com/woodpecker-ci/woodpecker/pull/3539" target="_blank" rel="noopener noreferrer">#3539</a><a href="https://woodpecker-ci.org/blog/release-v300#register-your-own-agents-for-users-or-organizations-3539" class="hash-link" aria-label="Direct link to register-your-own-agents-for-users-or-organizations-3539" title="Direct link to register-your-own-agents-for-users-or-organizations-3539">‚Äã</a></h2>
<p>WoodpeckerCI now lets you register custom agents scoped to individual users or organizations. This means you can bring your own agents, configured to meet the unique needs of your projects, and assign them to specific users or organizational workflows.</p>
<p>This update provides flexibility for teams with diverse requirements, allowing them to integrate agents tailored to specific tasks or environments seamlessly into their pipelines.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="replay-pipelines-locally-using-cli-exec-4103">Replay Pipelines Locally Using <code>cli exec</code> <a href="https://github.com/woodpecker-ci/woodpecker/pull/4103" target="_blank" rel="noopener noreferrer">#4103</a><a href="https://woodpecker-ci.org/blog/release-v300#replay-pipelines-locally-using-cli-exec-4103" class="hash-link" aria-label="Direct link to replay-pipelines-locally-using-cli-exec-4103" title="Direct link to replay-pipelines-locally-using-cli-exec-4103">‚Äã</a></h2>
<p>Debugging pipelines no longer requires endless small adjustments and repeated pushes. With the new <code>woodpecker-cli exec</code> feature, you can download pipeline metadata directly from the server and replay it locally. This allows you to test and fix issues in a similar environment to the server, all from your machine.</p>
<p><img decoding="async" loading="lazy" alt="debug-pipelines-option" src="https://woodpecker-ci.org/assets/images/debug-pipelines-181a1581e7f5ce8eacc3a642c08d5715.png" width="1020" height="221" class="img_Btg5"></p>
<p>By locally debugging, this feature accelerates the development process and provides deeper insights into pipeline behavior without relying on server-side execution for every small change.</p>
<div class="theme-admonition theme-admonition-info admonition_LSCu alert alert--info"><div class="admonitionHeading_L6hm"><span class="admonitionIcon_aDmD"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_ZUDn"><p>In order to use this feature, all required pipeline elements must be passed, e.g. secrets.
However, secrets are not included in the pipeline metadata and must be passed manually to the local execution call.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="rootless-images">Rootless images<a href="https://woodpecker-ci.org/blog/release-v300#rootless-images" class="hash-link" aria-label="Direct link to Rootless images" title="Direct link to Rootless images">‚Äã</a></h2>
<p>Woodpecker now supports running rootless images by adjusting the entrypoints and directory permissions in the containers in a way that allows non-privileged users to execute tasks.</p>
<p>In addition, all images published by Woodpecker (Server, Agent, CLI) now use a non-privileged user (<code>woodpecker</code> with UID and GID <code>1000</code>) by default. If you have volumes attached to the containers, you may need to change the ownership of these directories from <code>root</code> to <code>woodpecker</code> by executing <code>chown -R 1000:1000 &lt;mount dir&gt;</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_LSCu alert alert--info"><div class="admonitionHeading_L6hm"><span class="admonitionIcon_aDmD"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_ZUDn"><p>The agent image must remain rootful by default to be able to mount the Docker socket when Woodpecker is used with the <code>docker</code> backend.
The helm chart will start to use a non-privileged user by utilizing <code>securityContext</code>.
Running a completely rootless agent with the <code>docker</code> backend may be possible by using a rootless docker daemon.
However, this requires more work and is currently not supported.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="fine-grained-control-over-approvals-options">Fine grained control over approvals options<a href="https://woodpecker-ci.org/blog/release-v300#fine-grained-control-over-approvals-options" class="hash-link" aria-label="Direct link to Fine grained control over approvals options" title="Direct link to Fine grained control over approvals options">‚Äã</a></h2>
<p>Woodpecker 3.0.0 introduces enhanced approval options. Beyond requiring approval for all pipeline events, you can now configure it specifically for all pull requests or only for pull requests originating from forks.</p>
<p>By default, public repositories will now mandate approval for pull requests from forks. This helps prevent potentially malicious PRs from exposing secrets or performing unauthorized actions without the repository owner's awareness.</p>
<p><img decoding="async" loading="lazy" alt="screenshot of new approval-requirements options" src="https://woodpecker-ci.org/assets/images/approval-requirements-19f36c8754e5bdb5eb1958d603492c80.png" width="735" height="240" class="img_Btg5"></p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="ui">UI<a href="https://woodpecker-ci.org/blog/release-v300#ui" class="hash-link" aria-label="Direct link to UI" title="Direct link to UI">‚Äã</a></h2>
<p>We have fixed many UI-related bugs in this version.
Many were small misalignment related to padding, margins or other edge cases related to small screen sizes.
We also aimed to harmonize the icons across the UI, specifically across logical subgroups, such as status-icons or admin panel icons.</p>
<p>UI elements are now sized in a relative way, meaning they will all scale relative when you change the font-size or zoom in/out.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="deleting-old-pipeline-logs">Deleting old pipeline logs<a href="https://woodpecker-ci.org/blog/release-v300#deleting-old-pipeline-logs" class="hash-link" aria-label="Direct link to Deleting old pipeline logs" title="Direct link to Deleting old pipeline logs">‚Äã</a></h2>
<p>Deleting a pipeline now successfully also deletes its related logs.
Beforehand, there was an issue where the logs were not deleted and were kept in the DB forever.</p>
<p>You might want to check <a href="https://github.com/woodpecker-ci/woodpecker/pull/4572" target="_blank" rel="noopener noreferrer">#4572</a> for more details including a snippet how to delete orphaned entries of a Postgres DB.</p>
<div class="theme-admonition theme-admonition-info admonition_LSCu alert alert--info"><div class="admonitionHeading_L6hm"><span class="admonitionIcon_aDmD"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_ZUDn"><p>There is no option yet to auto-delete old pipeline logs after a specific time or event.
Please follow <a href="https://github.com/woodpecker-ci/woodpecker/issues/1068" target="_blank" rel="noopener noreferrer">#1068</a> for future updates.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="migration-to-standard-linux-cron-syntax">Migration to standard Linux CRON syntax<a href="https://woodpecker-ci.org/blog/release-v300#migration-to-standard-linux-cron-syntax" class="hash-link" aria-label="Direct link to Migration to standard Linux CRON syntax" title="Direct link to Migration to standard Linux CRON syntax">‚Äã</a></h2>
<p>CRON definitions now follow standard Linux syntax without seconds. An automatic migration will attempt to update your settings - ensure the update completes successfully.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="known-issues">Known Issues<a href="https://woodpecker-ci.org/blog/release-v300#known-issues" class="hash-link" aria-label="Direct link to Known Issues" title="Direct link to Known Issues">‚Äã</a></h2>
<p>The generic <code>pipeline definition not found</code> is still present and not yet understood.
This error message can be triggered by various elements (which the most likely one being a (temporary) connection issue with the forge) and the error return/output must be improved first in order to take appropriate action.</p>]]></content:encoded>
            <category>release</category>
            <category>major</category>
        </item>
        <item>
            <title><![CDATA[Here is Woodpecker 2.5.0]]></title>
            <link>https://woodpecker-ci.org/blog/release-v250</link>
            <guid>https://woodpecker-ci.org/blog/release-v250</guid>
            <pubDate>Mon, 27 May 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Introducing Woodpecker 2.5.0]]></description>
            <content:encoded><![CDATA[<p>Here is the next minor release 2.5.0 of Woodpecker ü™∂ ‚òÄÔ∏è.</p>
<p>As always thanks to all contributors who helped to make this release possible. It includes quite a few enhancements
most users will benefit from while they are probably not that visible at first sight for most. The release also includes some preparations for new features to come in the next versions. Anyway, let's dive into some of the highlights of this release:</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="improve-the-way-entrypoints-work">Improve the way entrypoints work<a href="https://woodpecker-ci.org/blog/release-v250#improve-the-way-entrypoints-work" class="hash-link" aria-label="Direct link to Improve the way entrypoints work" title="Direct link to Improve the way entrypoints work">‚Äã</a></h2>
<p>The implementation wasn't perfect yet so we improved the way entrypoints work:</p>
<p>If you define <a href="https://woodpecker-ci.org/docs/usage/workflow-syntax#commands"><code>commands</code></a>, the default entrypoint will be <code>["/bin/sh", "-c", "echo $CI_SCRIPT | base64 -d | /bin/sh -e"]</code>.</p>
<p>If you define your own entrypoint, you can completely overwrite the default entrypoint. If you define <code>entrypoint: ["/bin/my-script", ""]</code> for example you can run your own binary / script. In this case the commands section will ignored, however you can still access it in your own script by using the base64 encoded string of the <code>CI_SCRIPT</code> environment variable.</p>
<p><a href="https://github.com/woodpecker-ci/woodpecker/pull/3269" target="_blank" rel="noopener noreferrer">#3269</a></p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="cli-output-formats">Cli output formats<a href="https://woodpecker-ci.org/blog/release-v250#cli-output-formats" class="hash-link" aria-label="Direct link to Cli output formats" title="Direct link to Cli output formats">‚Äã</a></h2>
<p>The cli output has been improved. The first command (mainly pipeline info, ls, create) support a <code>--output</code> flag now which allows you to change the output format. There is a new <code>table</code> format (the new default) which will look like the following and can be further customized:</p>
<div class="language-bash codeBlockContainer_pg4u theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_NVc0"><pre tabindex="0" class="prism-code language-bash codeBlock_welW thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_gu5P"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># use default table output</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚ùØ woodpecker-cli pipeline </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--limit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">NUMBER  STATUS   EVENT   BRANCH  COMMIT                                    AUTHOR</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">43</span><span class="token plain">      error    manual  main    473761d8b26b20f7c206408563d54cf998410329  woodpecker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">42</span><span class="token plain">      success  push    main    473761d8b26b20f7c206408563d54cf998410329  woodpecker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># customize table output and disable header</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚ùØ woodpecker-cli pipeline </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--limit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--output</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">table</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">number,status,event --no-header </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">43</span><span class="token plain">  error    manual</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">42</span><span class="token plain">  success  push</span><br></span></code></pre><div class="buttonGroup_VWNV"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Pad9" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_CXDe"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_lkKT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In addition especially useful for programmatic usage there is a <code>go-template</code> output format which will output the data using the provided go template like this:</p>
<div class="language-bash codeBlockContainer_pg4u theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_NVc0"><pre tabindex="0" class="prism-code language-bash codeBlock_welW thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_gu5P"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">########</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># go crazy and use a template layout</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚ùØ woodpecker-cli pipeline </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--limit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--output</span><span class="token plain"> go-template</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">'{{range .}}{{printf "\x1b[33mPipeline #%d\x1b[0m\nStatus: %s\nEvent:%s\nCommit:%s\n\n" .Number .Status .Event .Commit}}{{end}}'</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pipeline </span><span class="token comment" style="color:#999988;font-style:italic">#43</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status: error</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Event:manual</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Commit:473761d8b26b20f7c206408563d54cf998410329</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Pipeline </span><span class="token comment" style="color:#999988;font-style:italic">#42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Status: success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Event:push</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Commit:473761d8b26b20f7c206408563d54cf998410329</span><br></span></code></pre><div class="buttonGroup_VWNV"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Pad9" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_CXDe"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_lkKT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><a href="https://github.com/woodpecker-ci/woodpecker/pull/3660" target="_blank" rel="noopener noreferrer">#3660</a></p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="deleting-logs-or-complete-pipelines">Deleting logs or complete pipelines<a href="https://woodpecker-ci.org/blog/release-v250#deleting-logs-or-complete-pipelines" class="hash-link" aria-label="Direct link to Deleting logs or complete pipelines" title="Direct link to Deleting logs or complete pipelines">‚Äã</a></h2>
<p>If you accidentally exposed some secret to the public in your logs or you simply want to cleanup some logs you can now delete logs or complete pipelines using the api and the cli.</p>
<p><a href="https://github.com/woodpecker-ci/woodpecker/pull/3451" target="_blank" rel="noopener noreferrer">#3451</a>
<a href="https://github.com/woodpecker-ci/woodpecker/pull/3506" target="_blank" rel="noopener noreferrer">#3506</a>
<a href="https://github.com/woodpecker-ci/woodpecker/pull/3458" target="_blank" rel="noopener noreferrer">#3458</a></p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="support-for-github-deploy-tasks">Support for Github deploy tasks<a href="https://woodpecker-ci.org/blog/release-v250#support-for-github-deploy-tasks" class="hash-link" aria-label="Direct link to Support for Github deploy tasks" title="Direct link to Support for Github deploy tasks">‚Äã</a></h2>
<p>Woodpecker now supports Github deploy tasks. This allows you to pass the deploy task set in Github to your Woodpecker pipeline.</p>
<p><a href="https://github.com/woodpecker-ci/woodpecker/pull/3512" target="_blank" rel="noopener noreferrer">#3512</a></p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="deprecations">Deprecations<a href="https://woodpecker-ci.org/blog/release-v250#deprecations" class="hash-link" aria-label="Direct link to Deprecations" title="Direct link to Deprecations">‚Äã</a></h2>
<p>To keep things clean and simple we deprecated some pipeline options, server settings and features which will
be removed in the next major release:</p>
<ul>
<li>Deprecated <code>environment</code> filter, use <code>when.evaluate</code></li>
<li>Use <code>WOODPECKER_EXPERT_FORGE_OAUTH_HOST</code> instead of <code>WOODPECKER_DEV_GITEA_OAUTH_URL</code> or <code>WOODPECKER_DEV_OAUTH_HOST</code></li>
<li>Deprecated <code>WOODPECKER_WEBHOOK_HOST</code> in favor of <code>WOODPECKER_EXPERT_WEBHOOK_HOST</code></li>
</ul>
<p>For a full list of deprecations that will be dropped in the <code>next</code> major release <code>3.0.0</code> (no eta yet), please check the <a href="https://woodpecker-ci.org/migrations#next">migrations</a> section.</p>]]></content:encoded>
            <category>release</category>
            <category>minor</category>
        </item>
        <item>
            <title><![CDATA[[Community] Continuous Deployment]]></title>
            <link>https://woodpecker-ci.org/blog/continuous-deployment</link>
            <guid>https://woodpecker-ci.org/blog/continuous-deployment</guid>
            <pubDate>Mon, 01 Jan 2024 00:00:00 GMT</pubDate>
            <description><![CDATA[Deploy your artifacts to an app server]]></description>
            <content:encoded><![CDATA[<p>A typical CI pipeline contains steps such as: <em>clone</em>, <em>build</em>, <em>test</em>, <em>package</em> and <em>push</em>. The final build product may be artifacts pushed to a git repository or a docker container pushed to a container registry.</p>
<p>When these should be deployed on an app server, the pipeline should include a <em>deploy</em> step, which represents the "CD" in CI/CD - the automatic deployment of a pipeline's final product.</p>
<p>There are various ways to accomplish CD with Woodpecker, depending on your project's specific needs.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="invoking-deploy-script-via-ssh">Invoking deploy script via SSH<a href="https://woodpecker-ci.org/blog/continuous-deployment#invoking-deploy-script-via-ssh" class="hash-link" aria-label="Direct link to Invoking deploy script via SSH" title="Direct link to Invoking deploy script via SSH">‚Äã</a></h2>
<p>The final step in your pipeline could SSH into the app server and run a deployment script.</p>
<p>One of the benefits would be that the deployment script's output could be included in the pipeline's log. However in general, this is a complicated option as it tightly couples the CI and app servers.</p>
<p>An SSH step could be written by using a plugin, like <a href="https://plugins.drone.io/plugins/ssh" target="_blank" rel="noopener noreferrer">ssh</a> or <a href="https://woodpecker-ci.org/plugins/Git%20Push" target="_blank" rel="noopener noreferrer">git push</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="polling-for-asset-changes">Polling for asset changes<a href="https://woodpecker-ci.org/blog/continuous-deployment#polling-for-asset-changes" class="hash-link" aria-label="Direct link to Polling for asset changes" title="Direct link to Polling for asset changes">‚Äã</a></h2>
<p>This option completely decouples the CI and app servers, and there is no explicit deploy step in the pipeline.</p>
<p>On the app server, one should create a script or cron job that polls for asset changes (every minute, say). When a new version is detected, the script redeploys the app.</p>
<p>This option is easy to maintain, but the downside is a short delay (one minute) before new assets are detected.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="using-a-configuration-management-tool">Using a configuration management tool<a href="https://woodpecker-ci.org/blog/continuous-deployment#using-a-configuration-management-tool" class="hash-link" aria-label="Direct link to Using a configuration management tool" title="Direct link to Using a configuration management tool">‚Äã</a></h2>
<p>If you are using a configuration management tool (e.g. Ansible, Chef, Puppet), then you could setup the last pipeline step to call that tool to perform the redeployment.</p>
<p>A plugin for <a href="https://woodpecker-ci.org/plugins/Ansible" target="_blank" rel="noopener noreferrer">Ansible</a> exists and could be adapted accordingly.</p>
<p>This option is complex and only suitable in an environment in which you're already using configuration management.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="using-webhooks-recommended">Using webhooks (recommended)<a href="https://woodpecker-ci.org/blog/continuous-deployment#using-webhooks-recommended" class="hash-link" aria-label="Direct link to Using webhooks (recommended)" title="Direct link to Using webhooks (recommended)">‚Äã</a></h2>
<p>If your forge (GitHub, GitLab, Gitea, etc.) supports webhooks, then you could create a separate listening app that receives a webhook when new assets are available and redeploys your app.</p>
<p>The listening "app" can be something as simple as a PHP script.</p>
<p>Alternatively, there are a number of popular webhook servers that simplify this process, so you only need to write your actual deployment script. For example, <a href="https://github.com/adnanh/webhook" target="_blank" rel="noopener noreferrer">webhook</a> and <a href="https://github.com/ncarlier/webhookd" target="_blank" rel="noopener noreferrer">webhookd</a>.</p>
<p>This is arguably the simplest and most maintainable solution.</p>]]></content:encoded>
            <category>community</category>
            <category>cd</category>
            <category>deployment</category>
        </item>
        <item>
            <title><![CDATA[[Community] Podman image build with sigstore]]></title>
            <link>https://woodpecker-ci.org/blog/podman-image-build-sigstore</link>
            <guid>https://woodpecker-ci.org/blog/podman-image-build-sigstore</guid>
            <pubDate>Fri, 15 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Build images in Podman with sigstore signature checking and signing]]></description>
            <content:encoded><![CDATA[<p>This example shows how to build a container image with podman while verifying the base image and signing the resulting image.</p>
<p>The image being pulled uses a keyless signature, while the image being built will be signed by a pre-generated private key.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="prerequisites">Prerequisites<a href="https://woodpecker-ci.org/blog/podman-image-build-sigstore#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="generate-signing-keypair">Generate signing keypair<a href="https://woodpecker-ci.org/blog/podman-image-build-sigstore#generate-signing-keypair" class="hash-link" aria-label="Direct link to Generate signing keypair" title="Direct link to Generate signing keypair">‚Äã</a></h3>
<p>You can use cosing or skopeo to generate the keypair.</p>
<p>Using skopeo:</p>
<div class="language-bash codeBlockContainer_pg4u theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_NVc0"><pre tabindex="0" class="prism-code language-bash codeBlock_welW thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_gu5P"><span class="token-line" style="color:#393A34"><span class="token plain">skopeo generate-sigstore-key --output-prefix myKey</span><br></span></code></pre><div class="buttonGroup_VWNV"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Pad9" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_CXDe"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_lkKT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This command will generate a <code>myKey.private</code> and a <code>myKey.pub</code> keyfile.</p>
<p>Store the <code>myKey.private</code> as secret in Woodpecker. In the example below, the secret is called <code>sigstore_private_key</code></p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="configure-hosts-pulling-the-resulting-image">Configure hosts pulling the resulting image<a href="https://woodpecker-ci.org/blog/podman-image-build-sigstore#configure-hosts-pulling-the-resulting-image" class="hash-link" aria-label="Direct link to Configure hosts pulling the resulting image" title="Direct link to Configure hosts pulling the resulting image">‚Äã</a></h3>
<p>See <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/building_running_and_managing_containers/assembly_signing-container-images_building-running-and-managing-containers#proc_verifying-sigstore-image-signatures-using-a-public-key_assembly_signing-container-images" target="_blank" rel="noopener noreferrer">here</a> on how to configure the hosts pulling the built and signed image.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="repository-structure">Repository structure<a href="https://woodpecker-ci.org/blog/podman-image-build-sigstore#repository-structure" class="hash-link" aria-label="Direct link to Repository structure" title="Direct link to Repository structure">‚Äã</a></h2>
<p>Consider the <code>Makefile</code> having a <code>build</code> target that will be used in the following workflow.
This target yields a Go binary with the filename <code>app</code> that will be placed in the root directory.</p>
<div class="language-bash codeBlockContainer_pg4u theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_NVc0"><pre tabindex="0" class="prism-code language-bash codeBlock_welW thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_gu5P"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ Containerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ main.go</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ go.mod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ go.sum</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ .woodpecker.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ Makefile</span><br></span></code></pre><div class="buttonGroup_VWNV"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Pad9" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_CXDe"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_lkKT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="containerfile">Containerfile<a href="https://woodpecker-ci.org/blog/podman-image-build-sigstore#containerfile" class="hash-link" aria-label="Direct link to Containerfile" title="Direct link to Containerfile">‚Äã</a></h3>
<p>The Containerfile refers to the base image that will be verified when pulled.</p>
<div class="language-dockerfile codeBlockContainer_pg4u theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_NVc0"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_welW thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_gu5P"><span class="token-line" style="color:#393A34"><span class="token instruction keyword" style="color:#00009f">FROM</span><span class="token instruction"> gcr.io/distroless/static-debian12:nonroot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">COPY</span><span class="token instruction"> app /app</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token instruction keyword" style="color:#00009f">CMD</span><span class="token instruction"> [</span><span class="token instruction string" style="color:#e3116c">"/app"</span><span class="token instruction">]</span><br></span></code></pre><div class="buttonGroup_VWNV"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Pad9" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_CXDe"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_lkKT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="woodpecker-workflow">Woodpecker workflow<a href="https://woodpecker-ci.org/blog/podman-image-build-sigstore#woodpecker-workflow" class="hash-link" aria-label="Direct link to Woodpecker workflow" title="Direct link to Woodpecker workflow">‚Äã</a></h3>
<div class="language-yaml codeBlockContainer_pg4u theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_NVc0"><pre tabindex="0" class="prism-code language-yaml codeBlock_welW thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_gu5P"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> docker.io/library/golang</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1.21</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pull</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> make build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">publish</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> quay.io/podman/stable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Caution: This image is built daily. It might fill up your image store quickly.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pull</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Fill in the trusted checkbox in Woodpecker's settings as well</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">privileged</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Configure podman to use sigstore attachments for both, the registry you pull from and the registry you push to.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        printf "docker:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          registry.gitlab.com:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            use-sigstore-attachments: true</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          gcr.io:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            use-sigstore-attachments: true" &gt;&gt; /etc/containers/registries.d/default.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># At pull, check the keyless sigstore signature of the distroless image.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># This is a very strict container policy. It allows pulling from gcr.io/distroless only. Every other registry will be rejected.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># See https://github.com/containers/image/blob/main/docs/containers-policy.json.5.md for more information.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># fulcio CA crt obtained from https://github.com/sigstore/sigstore/blob/main/pkg/tuf/repository/targets/fulcio_v1.crt.pem</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># rekor public key obtained from https://github.com/sigstore/sigstore/blob/main/pkg/tuf/repository/targets/rekor.pub</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># crt/key data is base64 encoded. --&gt; echo "$CERT" | base64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        printf '{</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            "default": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                "type": "reject"</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            "transports": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              "docker": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                "gcr.io/distroless": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                    "type": "sigstoreSigned",</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                    "fulcio": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                      "caData": "LS0tLS1CRUdJTiBDR...QVRFLS0tLS0K",</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                      "oidcIssuer": "https://accounts.google.com",</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                      "subjectEmail": "keyless@distroless.iam.gserviceaccount.com"</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                    "rekorPublicKeyData": "LS0tLS1CRUdJTiBQVUJ...lDIEtFWS0tLS0tCg==",</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                    "signedIdentity": { "type": "matchRepository" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              },</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              "docker-daemon": {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                "": [</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                    "type": "reject"</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">                ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          }' &gt; /etc/containers/policy.json</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Use this key to sign the built image at push.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> echo "$SIGSTORE_PRIVATE_KEY" </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> key.private</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Login at the registry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> echo $REGISTRY_LOGIN_TOKEN </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> podman login </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">u &lt;username</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">password</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stdin registry.gitlab.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Build the container image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> podman build </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tag registry.gitlab.com/&lt;namespace</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">/&lt;repository_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">/&lt;image_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Sign and push the image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> podman push </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sign</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">by</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sigstore</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">private</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">key ./key.private registry.gitlab.com/&lt;namespace</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">/&lt;repository_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">/&lt;image_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secrets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">sigstore_private_key</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> registry_login_token</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_VWNV"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Pad9" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_CXDe"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_lkKT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>community</category>
            <category>image</category>
            <category>podman</category>
            <category>sigstore</category>
            <category>signature</category>
        </item>
        <item>
            <title><![CDATA[[Community] Debug pipeline steps]]></title>
            <link>https://woodpecker-ci.org/blog/debug-pipeline-steps</link>
            <guid>https://woodpecker-ci.org/blog/debug-pipeline-steps</guid>
            <pubDate>Wed, 13 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Debug pipeline steps using sshx]]></description>
            <content:encoded><![CDATA[<p>Sometimes you want to debug a pipeline.
Therefore I recently discovered: <a href="https://github.com/ekzhang/sshx" target="_blank" rel="noopener noreferrer">https://github.com/ekzhang/sshx</a></p>
<p>A simple step like should allow you to debug:</p>
<div class="language-yaml codeBlockContainer_pg4u theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_NVc0"><pre tabindex="0" class="prism-code language-yaml codeBlock_welW thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_gu5P"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> curl </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sSf https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//sshx.io/get </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> sh </span><span class="token important">&amp;&amp;</span><span class="token plain"> sshx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">#      ^</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">#      ‚îî This will open a remote terminal session and print the URL. It</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">#        should take under a second.</span><br></span></code></pre><div class="buttonGroup_VWNV"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Pad9" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_CXDe"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_lkKT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>]]></content:encoded>
            <category>community</category>
            <category>debug</category>
        </item>
        <item>
            <title><![CDATA[[Community] Podman-in-Podman image builds]]></title>
            <link>https://woodpecker-ci.org/blog/podman-image-builds</link>
            <guid>https://woodpecker-ci.org/blog/podman-image-builds</guid>
            <pubDate>Tue, 12 Dec 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Build images in Podman with buildah]]></description>
            <content:encoded><![CDATA[<p>I run Woodpecker CI with podman backend instead of docker and just figured out how to build images with buildah. Since I couldn't find this anywhere documented, I thought I might as well just share it here.</p>
<p>It's actually pretty straight forward. Here's what my repository structure looks like:</p>
<div class="language-bash codeBlockContainer_pg4u theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_NVc0"><pre tabindex="0" class="prism-code language-bash codeBlock_welW thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_gu5P"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îú‚îÄ‚îÄ roundcube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ Containerfile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îÇ&nbsp;&nbsp; ‚îú‚îÄ‚îÄ docker-entrypoint.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îÇ&nbsp;&nbsp; ‚îî‚îÄ‚îÄ php.ini</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">‚îî‚îÄ‚îÄ .woodpecker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚îî‚îÄ‚îÄ .build_roundcube.yml</span><br></span></code></pre><div class="buttonGroup_VWNV"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Pad9" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_CXDe"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_lkKT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see I'm building a roundcube mail image.</p>
<p>This is the <code>.woodpecker/.build_roundcube.yaml</code></p>
<div class="language-yaml codeBlockContainer_pg4u theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_NVc0"><pre tabindex="0" class="prism-code language-yaml codeBlock_welW thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_gu5P"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">when</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">event</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">cron</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> manual</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">cron</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> build_roundcube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">build-image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> quay.io/buildah/stable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pull</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">privileged</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">commands</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> echo $REGISTRY_LOGIN_TOKEN </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> buildah login </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">u &lt;username</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">password</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stdin registry.gitlab.com</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> cd roundcube</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> buildah build </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">tag registry.gitlab.com/&lt;namespace</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">/&lt;repository_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">/roundcube</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> buildah push registry.gitlab.com/&lt;namespace</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">/&lt;repository_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain">/roundcube</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">secrets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">registry_login_token</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_VWNV"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_Pad9" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_CXDe"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_lkKT"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As you can see, I'm using this workflow over at gitlab.com. It should work with GitHub as well, with adjusting the registry login.</p>
<p>You may have to adjust the <code>when:</code> to your needs. Furthermore, you must check the <code>trusted</code> checkbox in project settings. Therefore, be sure to run trusted code only in this setup.</p>
<p>This seems to work fine so far. I wonder if anybody else made this work a different way.</p>
<p>EDIT: Removed the additional step that would run buildah in a podman container. I didn't know it could be that easy to be honest.</p>]]></content:encoded>
            <category>community</category>
            <category>image</category>
            <category>podman</category>
        </item>
        <item>
            <title><![CDATA[It's time for some changes - Woodpecker 2.0.0]]></title>
            <link>https://woodpecker-ci.org/blog/release-v200</link>
            <guid>https://woodpecker-ci.org/blog/release-v200</guid>
            <pubDate>Thu, 09 Nov 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introducing Woodpecker 2.0.0 with more than 350 changes]]></description>
            <content:encoded><![CDATA[<p>We are proud to present you Woodpecker v2.0.0 with more than 350 changes from our fabulous community. This release includes a lot of new features, improvements and some breaking changes which most of you probably already tested using the <code>next</code> tag or the RC version.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="how-we-plan-to-handle-releases-in-the-future">How we plan to handle releases in the future<a href="https://woodpecker-ci.org/blog/release-v200#how-we-plan-to-handle-releases-in-the-future" class="hash-link" aria-label="Direct link to How we plan to handle releases in the future" title="Direct link to How we plan to handle releases in the future">‚Äã</a></h2>
<p>In the future, there won't be backports anymore as they require quite an amount of maintenance. Instead, we'll release our current state of the <code>main</code> branch with the correct version (according to semver) every few weeks. Of course, critical bug and security fixes are released as soon as possible. To not release new major version too often, we'll try to hold back breaking changes pull-request for a longer time and release them all together in a new major version.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="breaking-changes">Breaking changes<a href="https://woodpecker-ci.org/blog/release-v200#breaking-changes" class="hash-link" aria-label="Direct link to Breaking changes" title="Direct link to Breaking changes">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="renamed-some-api-routes">Renamed some api routes<a href="https://woodpecker-ci.org/blog/release-v200#renamed-some-api-routes" class="hash-link" aria-label="Direct link to Renamed some api routes" title="Direct link to Renamed some api routes">‚Äã</a></h3>
<p>We renamed some API routes to be more consistent. So we suggest admins to update all repository webhooks by clicking on the newly added <code>Repair all repositories</code> button in the admin settings.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="dropped-deprecated-environment-variables-and-cli-commands">Dropped deprecated environment variables and CLI commands<a href="https://woodpecker-ci.org/blog/release-v200#dropped-deprecated-environment-variables-and-cli-commands" class="hash-link" aria-label="Direct link to Dropped deprecated environment variables and CLI commands" title="Direct link to Dropped deprecated environment variables and CLI commands">‚Äã</a></h3>
<p>For v1.0.0, we deprecated a bunch of old environment variables like <code>CI_BUILD_*</code>. These variables were removed in this version, you therefore have to use the new ones.
Also, the deprecated <code>build</code> command of the CLI was removed. Use <code>pipeline</code> instead.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="removed-ssh-backend">Removed SSH backend<a href="https://woodpecker-ci.org/blog/release-v200#removed-ssh-backend" class="hash-link" aria-label="Direct link to Removed SSH backend" title="Direct link to Removed SSH backend">‚Äã</a></h3>
<p>Due to various issues with the SSH backend we decided to remove it.
As an alternative, you can install an agent running the local backend directly on the remote machine or you can simply execute <code>ssh</code> commands connecting to the remote server in your pipeline.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="deprecated-platform-filter">Deprecated <code>platform</code> filter<a href="https://woodpecker-ci.org/blog/release-v200#deprecated-platform-filter" class="hash-link" aria-label="Direct link to deprecated-platform-filter" title="Direct link to deprecated-platform-filter">‚Äã</a></h3>
<p>The <code>platform</code> filter has been removed. Use the more advanced labels instead (<a href="https://woodpecker-ci.org/docs/usage/workflow-syntax#filter-by-platform">read more</a>).</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="update-docker-to-v24">Update Docker to v24<a href="https://woodpecker-ci.org/blog/release-v200#update-docker-to-v24" class="hash-link" aria-label="Direct link to Update Docker to v24" title="Direct link to Update Docker to v24">‚Äã</a></h3>
<p>We updated Docker to v24 as of some security patches. If you use an older version of Docker, you might need to upgrade it.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="removed-plugin-only-option-from-secrets">Removed plugin-only option from secrets<a href="https://woodpecker-ci.org/blog/release-v200#removed-plugin-only-option-from-secrets" class="hash-link" aria-label="Direct link to Removed plugin-only option from secrets" title="Direct link to Removed plugin-only option from secrets">‚Äã</a></h3>
<p>Security is pretty important to us and we want to make sure that no one can steal your secrets. Therefore, we decided to remove the plugin-only option from secrets and instead, if you define an image filter, it will be automatically only available to plugins using the defined image names.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="migration-notes">Migration notes<a href="https://woodpecker-ci.org/blog/release-v200#migration-notes" class="hash-link" aria-label="Direct link to Migration notes" title="Direct link to Migration notes">‚Äã</a></h2>
<p>There have been a few more breaking changes. <a href="https://woodpecker-ci.org/migrations#200">Read more about what you need to do when upgrading!</a></p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="new-features">New features<a href="https://woodpecker-ci.org/blog/release-v200#new-features" class="hash-link" aria-label="Direct link to New features" title="Direct link to New features">‚Äã</a></h2>
<p>But that's enough about breaking changes. Let's talk about the new features!</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="config-warnings-and-errors-in-the-ui">Config warnings and errors in the UI<a href="https://woodpecker-ci.org/blog/release-v200#config-warnings-and-errors-in-the-ui" class="hash-link" aria-label="Direct link to Config warnings and errors in the UI" title="Direct link to Config warnings and errors in the UI">‚Äã</a></h3>
<p>You ever wondered why a secret was not working and after hours of debugging you found out that you misspelled the secret name? Or you used a wrong key in your YAML config? Woodpecker now shows errors and linter warnings directly in it's UI, notifying you about missing secrets, incorrect configuration or deprecated settings!</p>
<p><img decoding="async" loading="lazy" alt="Image of warnings and errors in the UI" src="https://woodpecker-ci.org/assets/images/linter_warnings_errors-d67e4737392ab8575a3f5b2e0a398a8b.png" width="2256" height="587" class="img_Btg5"></p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="repository-and-organization-overview-for-admins">Repository and organization overview for admins<a href="https://woodpecker-ci.org/blog/release-v200#repository-and-organization-overview-for-admins" class="hash-link" aria-label="Direct link to Repository and organization overview for admins" title="Direct link to Repository and organization overview for admins">‚Äã</a></h3>
<p>Admins now get an overview over all repositories and organizations registered on the server, allowing them to perform common actions like deleting directly from the admin dashboard.</p>
<p><img decoding="async" loading="lazy" alt="Image of repos overview" src="https://woodpecker-ci.org/assets/images/admin_repos-b8c7217eecff756015577c24b9f4acad.png" width="1029" height="526" class="img_Btg5"></p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="support-for-user-secrets">Support for user secrets<a href="https://woodpecker-ci.org/blog/release-v200#support-for-user-secrets" class="hash-link" aria-label="Direct link to Support for user secrets" title="Direct link to Support for user secrets">‚Äã</a></h3>
<p>It is now possible to add secrets for all repos owned by yourself, similar to organization and global secrets.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="bitbucket-cloud-support-for-multi-workflows">Bitbucket cloud support for multi-workflows<a href="https://woodpecker-ci.org/blog/release-v200#bitbucket-cloud-support-for-multi-workflows" class="hash-link" aria-label="Direct link to Bitbucket cloud support for multi-workflows" title="Direct link to Bitbucket cloud support for multi-workflows">‚Äã</a></h3>
<p>We enhanced support for Bitbucket, allowing you to use multiple workflows just as you probably know from all other forges already.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="full-support-for-kubernetes-backend">Full support for Kubernetes backend<a href="https://woodpecker-ci.org/blog/release-v200#full-support-for-kubernetes-backend" class="hash-link" aria-label="Direct link to Full support for Kubernetes backend" title="Direct link to Full support for Kubernetes backend">‚Äã</a></h3>
<p>Many of you already used it extensively in the past, but now we can finally call the Kubernetes backend ready for production use. Supporting all major features and even quite some Kubernetes specific options.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="auto-theme">Auto theme<a href="https://woodpecker-ci.org/blog/release-v200#auto-theme" class="hash-link" aria-label="Direct link to Auto theme" title="Direct link to Auto theme">‚Äã</a></h3>
<p>The UI now supports automatically adapting the theme to your browser config, so no more light mode in the middle of the night!</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="update-notification">Update notification<a href="https://woodpecker-ci.org/blog/release-v200#update-notification" class="hash-link" aria-label="Direct link to Update notification" title="Direct link to Update notification">‚Äã</a></h3>
<p>Updates are awesome as they bring new features and bug fixes most of the time, but sometimes there are also important security fixes which should be installed as soon as possible. To not miss any of them, we added a notification to the UI for admins if there's a new update available.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="changelog">Changelog<a href="https://woodpecker-ci.org/blog/release-v200#changelog" class="hash-link" aria-label="Direct link to Changelog" title="Direct link to Changelog">‚Äã</a></h2>
<p>The full changelog can be viewed in our project source folder at <a href="https://github.com/woodpecker-ci/woodpecker/blob/v2.0.0/CHANGELOG.md" target="_blank" rel="noopener noreferrer">CHANGELOG.md</a></p>]]></content:encoded>
            <category>release</category>
            <category>major</category>
        </item>
        <item>
            <title><![CDATA[Presenting Woodpecker 1.0.0]]></title>
            <link>https://woodpecker-ci.org/blog/release-v100</link>
            <guid>https://woodpecker-ci.org/blog/release-v100</guid>
            <pubDate>Fri, 28 Jul 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[Introducing Woodpecker 1.0.0 and its new features.]]></description>
            <content:encoded><![CDATA[<p>We are proud to present you Woodpecker v1.0.0.
It took us quite some time, but now we are sure it's ready, and you should really have a look at it.</p>
<p>We've refactored a lot of code, so contributing to the codebase should be much easier.
Furthermore, a ton of bugs where addressed and various enhancements introduced, along with some highly anticipated features.
With Woodpecker v1.0.0, you can now substantially improve and streamline your code pipelines,
empowering you to automate and optimize workflows like never before.</p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="some-picked-highlights">Some picked highlights<a href="https://woodpecker-ci.org/blog/release-v100#some-picked-highlights" class="hash-link" aria-label="Direct link to Some picked highlights" title="Direct link to Some picked highlights">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="add-support-for-cron-jobs">Add Support for Cron Jobs<a href="https://woodpecker-ci.org/blog/release-v100#add-support-for-cron-jobs" class="hash-link" aria-label="Direct link to Add Support for Cron Jobs" title="Direct link to Add Support for Cron Jobs">‚Äã</a></h3>
<p>Automate recurring tasks with ease using Woodpecker's new cron jobs feature.
Schedule pipelines to run at specified intervals or times, optimizing repetitive workflows.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="yaml-map-merge-overrides-and-sequence-merge-support">YAML Map Merge, Overrides, and Sequence Merge Support<a href="https://woodpecker-ci.org/blog/release-v100#yaml-map-merge-overrides-and-sequence-merge-support" class="hash-link" aria-label="Direct link to YAML Map Merge, Overrides, and Sequence Merge Support" title="Direct link to YAML Map Merge, Overrides, and Sequence Merge Support">‚Äã</a></h3>
<p>With enhanced YAML support, managing complex configurations becomes a breeze.
Merge maps, apply overrides, and sequence merging‚Äîall within your YAML files.
This is providing more flexibility and control over your pipelines.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="web-ui-for-admins">Web-UI for Admins<a href="https://woodpecker-ci.org/blog/release-v100#web-ui-for-admins" class="hash-link" aria-label="Direct link to Web-UI for Admins" title="Direct link to Web-UI for Admins">‚Äã</a></h3>
<p>Simplify administration tasks with Woodpecker's new Admin UI.
Effortlessly manage user accounts, agents, and tasks, including adding new agents or pausing the task queue for maintenance.</p>
<p><img decoding="async" loading="lazy" alt="Image of admin queue view" src="https://woodpecker-ci.org/assets/images/admin_queue_ui-c5e0269e25c87f84a340419b23f40cd9.png" width="1065" height="585" class="img_Btg5"></p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="localize-web-ui">Localize Web-UI<a href="https://woodpecker-ci.org/blog/release-v100#localize-web-ui" class="hash-link" aria-label="Direct link to Localize Web-UI" title="Direct link to Localize Web-UI">‚Äã</a></h3>
<p>Embrace internationalization by changing your locale in the user settings.
Interact with Woodpecker in the language of your choice, tailored to your preferences.
If your language is not available or only partially translated, consider contributing to our <a href="https://translate.woodpecker-ci.org/engage/woodpecker-ci/" target="_blank" rel="noopener noreferrer">Weblate</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="add-evaluate-to-when-filter">Add <code>evaluate</code> to <code>when</code> Filter<a href="https://woodpecker-ci.org/blog/release-v100#add-evaluate-to-when-filter" class="hash-link" aria-label="Direct link to add-evaluate-to-when-filter" title="Direct link to add-evaluate-to-when-filter">‚Äã</a></h3>
<p>Enhance pipeline flexibility with the new "when evaluate" filter, enabling or disabling steps based on custom conditions.
Customize your workflows to dynamically respond to specific triggers and events.</p>
<h3 class="anchor anchorWithStickyNavbar_z84B" id="global--and-organization-secrets">Global- and Organization-Secrets<a href="https://woodpecker-ci.org/blog/release-v100#global--and-organization-secrets" class="hash-link" aria-label="Direct link to Global- and Organization-Secrets" title="Direct link to Global- and Organization-Secrets">‚Äã</a></h3>
<p>Save time and effort by declaring secrets for your entire instance or organization.
Simplify your workflow and securely manage sensitive information across projects.</p>
<p><img decoding="async" loading="lazy" alt="Image of settings view of org secrets" src="https://woodpecker-ci.org/assets/images/org_secrets-d45bd15bb3334510f7068d0f7d39f6c2.png" width="1076" height="505" class="img_Btg5"></p>
<h2 class="anchor anchorWithStickyNavbar_z84B" id="changelog">Changelog<a href="https://woodpecker-ci.org/blog/release-v100#changelog" class="hash-link" aria-label="Direct link to Changelog" title="Direct link to Changelog">‚Äã</a></h2>
<p>The full changelog can be viewed in our project source folder at <a href="https://github.com/woodpecker-ci/woodpecker/blob/v1.0.0/CHANGELOG.md" target="_blank" rel="noopener noreferrer">CHANGELOG.md</a></p>]]></content:encoded>
            <category>release</category>
            <category>major</category>
        </item>
        <item>
            <title><![CDATA[Welcome Woodpecker's blog]]></title>
            <link>https://woodpecker-ci.org/blog/hello-blog</link>
            <guid>https://woodpecker-ci.org/blog/hello-blog</guid>
            <pubDate>Sun, 11 Jun 2023 00:00:00 GMT</pubDate>
            <description><![CDATA[This our first post on Woodpecker]]></description>
            <content:encoded><![CDATA[<p>Welcome to this blog. This is our first post on this blog ...</p>
<p>In the future we will post about our releases and other things like tutorials.</p>
<p>We are currently working on the <code>1.0.0</code> release of Woodpecker. This release will include a lot of new features and improvements which most of you probably already tested using the <code>next</code> tag.</p>
<p>If you have any suggestions or ideas for posts, feel free to open an issue in the <a href="https://github.com/woodpecker-ci/woodpecker" target="_blank" rel="noopener noreferrer">GitHub repository</a>.</p>]]></content:encoded>
            <category>hello</category>
            <category>woodpecker</category>
        </item>
    </channel>
</rss>