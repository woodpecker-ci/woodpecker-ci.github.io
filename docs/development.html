<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.13">
<link rel="search" type="application/opensearchdescription+xml" title="Woodpecker CI" href="/opensearch.xml"><title data-react-helmet="true">Development | Woodpecker CI</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://woodpecker-ci.org/docs/development"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Development | Woodpecker CI"><meta data-react-helmet="true" name="description" content="Preparation"><meta data-react-helmet="true" property="og:description" content="Preparation"><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://woodpecker-ci.org/docs/development"><link data-react-helmet="true" rel="alternate" href="https://woodpecker-ci.org/docs/development" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://woodpecker-ci.org/docs/development" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.79f557ef.css">
<link rel="preload" href="/assets/js/runtime~main.df671c88.js" as="script">
<link rel="preload" href="/assets/js/main.44c3b900.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:var(--ifm-color-primary);color:var(--ifm-color-gray-900)" role="banner"><div class="announcementBarPlaceholder_2m9F"></div><div class="announcementBarContent_3EUC"> If you like Woodpecker-CI, <a href="https://github.com/woodpecker-ci/woodpecker" rel="noopener noreferrer" target="_blank">give us a star on GitHub</a> ! ‚≠êÔ∏è</div><button type="button" class="clean-btn close announcementBarClose_38nx" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Woodpecker Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo-darkmode.svg" alt="Woodpecker Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Woodpecker</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/plugins">Plugins</a><a class="navbar__item navbar__link" href="/docs/migrations">Migrations</a><a class="navbar__item navbar__link" href="/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/woodpecker-ci/woodpecker" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://opencollective.com/woodpecker-ci" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>üß° Sponsor Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">üåú</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">üåû</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Kl_"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Welcome to Woodpecker</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/usage/intro">Usage</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usage/intro">Getting started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usage/pipeline-syntax">Pipeline syntax</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usage/conditional-execution">Conditional Step Execution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usage/multi-pipeline">Multi pipelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usage/matrix-builds">Matrix builds</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usage/secrets">Secrets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usage/environment">Environment variables</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/docs/usage/plugins/plugins">Plugins</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usage/services">Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usage/volumes">Volumes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usage/project-settings">Project settings</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/usage/badges">Status Badges</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/administration/setup">Administration</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/cli">CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/downloads">Downloads</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/migrations">Migrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/development">Development</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Development</h1></header><h2 class="anchor anchorWithStickyNavbar_31ik" id="preparation">Preparation<a aria-hidden="true" class="hash-link" href="#preparation" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="install-tools">Install Tools<a aria-hidden="true" class="hash-link" href="#install-tools" title="Direct link to heading">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_31ik" id="go">Go<a aria-hidden="true" class="hash-link" href="#go" title="Direct link to heading">‚Äã</a></h4><p>Install Golang (&gt;=1.16) as described by <a href="https://go.dev/doc/install" target="_blank" rel="noopener noreferrer">this guide</a>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="make">make<a aria-hidden="true" class="hash-link" href="#make" title="Direct link to heading">‚Äã</a></h4><blockquote><p>GNU Make is a tool which controls the generation of executables and other non-source files of a program from the program&#x27;s source files. (<a href="https://www.gnu.org/software/make/" target="_blank" rel="noopener noreferrer">https://www.gnu.org/software/make/</a>)</p></blockquote><p>Install make on:</p><ul><li>Ubuntu: <code>apt install make</code> - <a href="https://wiki.ubuntuusers.de/Makefile/" target="_blank" rel="noopener noreferrer">Docs</a></li><li><a href="https://stackoverflow.com/a/32127632/8461267" target="_blank" rel="noopener noreferrer">Windows</a></li><li>Mac OS: <code>brew install make</code></li></ul><h4 class="anchor anchorWithStickyNavbar_31ik" id="nodejs--yarn">Node.js &amp; Yarn<a aria-hidden="true" class="hash-link" href="#nodejs--yarn" title="Direct link to heading">‚Äã</a></h4><p>Install <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener noreferrer">Node.js (&gt;=14)</a> if you want to build Woodpeckers UI or documentation.</p><p>For dependencies installation (node_modules) for the UI and documentation of Woodpecker the package-manager Yarn is used. The installation of Yarn is described by <a href="https://yarnpkg.com/getting-started/install" target="_blank" rel="noopener noreferrer">this guide</a>.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="create-a-env-file-with-your-development-configuration">Create a <code>.env</code> file with your development configuration<a aria-hidden="true" class="hash-link" href="#create-a-env-file-with-your-development-configuration" title="Direct link to heading">‚Äã</a></h3><p>Similar to the environment variables you can set for your production setup of Woodpecker, you can create a <code>.env</code> in the root of the Woodpecker project and add any need config to it.</p><p>A common config for debugging would look like this:</p><div class="codeBlockContainer_K1bP language-ini"><div class="codeBlockContent_hGly ini"><pre tabindex="0" class="prism-code language-ini codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">WOODPECKER_OPEN=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WOODPECKER_ADMIN=your-username</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># if you want to test webhooks with an online SCM like Github this address needs to be accessible from public server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WOODPECKER_HOST=http://your-dev-address.com/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># github (sample for a SCM config - see /docs/administration/vcs/overview for other SCMs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WOODPECKER_GITHUB=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WOODPECKER_GITHUB_CLIENT=&lt;redacted&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WOODPECKER_GITHUB_SECRET=&lt;redacted&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WOODPECKER_SERVER=localhost:9000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WOODPECKER_SECRET=a-long-and-secure-password-used-for-the-local-development-system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WOODPECKER_MAX_PROCS=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># enable if you want to develop the UI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># WOODPECKER_DEV_WWW_PROXY=http://localhost:3000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># used so you can login without using a public address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WOODPECKER_DEV_OAUTH_HOST=http://localhost:8000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># disable health-checks while debugging (normally not needed while developing)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WOODPECKER_HEALTHCHECK=false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># WOODPECKER_LOG_LEVEL=debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># WOODPECKER_LOG_LEVEL=trace</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="o-auth">O-Auth<a aria-hidden="true" class="hash-link" href="#o-auth" title="Direct link to heading">‚Äã</a></h3><p>Create an O-Auth app for your SCM as describe in the <a href="/docs/administration/vcs/overview">SCM documentation</a>. If you set <code>WOODPECKER_DEV_OAUTH_HOST=http://localhost:8000</code> you can use that address with the path as explained for the specific SCM to login without the need for a public address. For example for Github you would use <code>http://localhost:8000/authorize</code> as authorization callback URL.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="developing-with-vs-code">Developing with VS-Code<a aria-hidden="true" class="hash-link" href="#developing-with-vs-code" title="Direct link to heading">‚Äã</a></h2><p>You can use different methods for debugging the Woodpecker applications. One of the currently recommend ways to debug and test the Woodpecker application is using <a href="https://code.visualstudio.com/" target="_blank" rel="noopener noreferrer">VS-Code</a> or <a href="https://vscodium.com/" target="_blank" rel="noopener noreferrer">VS-Codium</a> (Open-Source binaries of VS-Code) as most maintainers are using it and Woodpecker already includes the needed debug configurations for it.</p><p>As a starting guide for programming Go with VS-Code you can use this video guide:
<a href="https://www.youtube.com/watch?v=1MXIGYrMk80" target="_blank" rel="noopener noreferrer"><img src="https://img.youtube.com/vi/1MXIGYrMk80/0.jpg" alt="Getting started with Go in VS-Code"></a></p><h3 class="anchor anchorWithStickyNavbar_31ik" id="debugging-woodpecker">Debugging Woodpecker<a aria-hidden="true" class="hash-link" href="#debugging-woodpecker" title="Direct link to heading">‚Äã</a></h3><p>The Woodpecker source code already includes launch configurations for the Woodpecker server and agent. To start debugging you can click on the debug icon in the navigation bar of VS-Code (ctrl-shift-d). On that page you will see the existing launch jobs at the top. Simply select the agent or server and click on the play button. You can set breakpoints in the source files to stop at specific points.</p><p><img alt="Woodpecker debugging with VS-Code" src="/assets/images/vscode-debug-3c793753073a5c21fea0495f17941337.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="ui-development">UI development<a aria-hidden="true" class="hash-link" href="#ui-development" title="Direct link to heading">‚Äã</a></h2><p>To develop the UI you need to install <a href="#nodejs--yarn">Node.js and Yarn</a>. In addition it is recommended to use VS-Code with the recommended plugin selection to get features like auto-formatting, linting and typechecking. The UI is written with <a href="https://v3.vuejs.org/" target="_blank" rel="noopener noreferrer">Vue 3</a> as Single-Page-Application accessing the Woodpecker REST api.</p><p>The UI code is placed in <code>web/</code>. Change to that folder in your terminal with <code>cd web/</code> and install all dependencies by running <code>yarn install</code>. Start the UI locally with <a href="https://stackoverflow.com/a/41429055/8461267" target="_blank" rel="noopener noreferrer">hot-reloading</a> by running: <code>yarn start</code>. To access the UI you now have to start the Woodpecker server.
For this you have to add the line <code>WOODPECKER_DEV_WWW_PROXY=http://localhost:3000</code> to your <code>.env</code> config and start the server after that as explained in the <a href="#debugging">debugging</a> section.</p><p>The UI will now be served under <a href="http://localhost:8000" target="_blank" rel="noopener noreferrer">http://localhost:8000</a> (don&#x27;t access the UI from port 3000 as that only show the UI without access to the actual api).</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="tools-and-frameworks">Tools and frameworks<a aria-hidden="true" class="hash-link" href="#tools-and-frameworks" title="Direct link to heading">‚Äã</a></h3><p>The following list contains some tools and frameworks used by the Woodpecker UI. For some points we added some guidelines / hints to help you developing.</p><ul><li><a href="https://v3.vuejs.org/" target="_blank" rel="noopener noreferrer">Vue 3</a><ul><li>use <code>setup</code> and composition api</li><li>place (re-usable) components in <code>web/src/components/</code></li><li>views should have a route in <code>web/src/router.ts</code> and are located in <code>web/src/views/</code></li></ul></li><li><a href="https://windicss.org/" target="_blank" rel="noopener noreferrer">Windicss</a> (similar to Tailwind)<ul><li>use Windicss classes where possible</li><li>if needed extend the Windicss config to use new classes</li></ul></li><li><a href="https://vitejs.dev/" target="_blank" rel="noopener noreferrer">Vite</a> (similar to Webpack)</li><li><a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">Typescript</a><ul><li>avoid using <code>any</code> and <code>unknown</code> (the linter will prevent you from doing so anyways üòâ)</li></ul></li><li><a href="https://eslint.org/" target="_blank" rel="noopener noreferrer">eslint</a></li><li><a href="https://github.com/johnsoncodehk/volar/" target="_blank" rel="noopener noreferrer">Volar &amp; vue-tsc</a> for type-checking in .vue file<ul><li>use the take-over mode of Volar as described by <a href="https://github.com/johnsoncodehk/volar/discussions/471" target="_blank" rel="noopener noreferrer">this guide</a></li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="documentation-development">Documentation development<a aria-hidden="true" class="hash-link" href="#documentation-development" title="Direct link to heading">‚Äã</a></h2><p>The documentation is using docusaurus as framework. You can learn more about it from its <a href="https://docusaurus.io/docs/" target="_blank" rel="noopener noreferrer">official documentation</a>.</p><p>If you only want to change some text it probably is enough if you just search for the corresponding <a href="https://www.markdownguide.org/basic-syntax/" target="_blank" rel="noopener noreferrer">Markdown</a> file inside the <code>docs/docs/</code> folder and adjust it. If you want to change larger parts and test the rendered documentation you can run docusaurus locally. Similarly to the UI you need to install <a href="#nodejs--yarn">Node.js and Yarn</a>. After that you can run and build docusaurus locally by using the following commands:</p><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> docs/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># build plugins used by the docs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> build:woodpecker-plugins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># start docs with hot-reloading, so you can change the docs and directly see the changes in the browser without reloading it manually</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># or build the docs to deploy it to some static page hosting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> build</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="testing--linting-code">Testing &amp; linting code<a aria-hidden="true" class="hash-link" href="#testing--linting-code" title="Direct link to heading">‚Äã</a></h2><p>To test or lint parts of Woodpecker you can run one of the following commands:</p><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># test server code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> test-server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># test agent code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> test-agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># test cli code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> test-cli</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># test datastore / database related code like migrations of the server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> test-server-datastore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># lint go code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> lint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># lint UI code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> lint-frontend</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># test UI code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> test-frontend</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you want to test a specific go file you can also use:</p><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">go </span><span class="token builtin class-name">test</span><span class="token plain"> -race -timeout 30s github.com/woodpecker-ci/woodpecker/</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">path-to-the-package-or-file-to-test</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Or you can open the test-file inside <a href="#developing-with-vs-code">VS-Code</a> and run or debug the test by clicking on the inline commands:</p><p><img alt="Run test via VS-Code" src="/assets/images/vscode-run-test-88492a530ddeb515dea1b334e1103aca.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="package-architecture-of-woodpecker">Package architecture of Woodpecker<a aria-hidden="true" class="hash-link" href="#package-architecture-of-woodpecker" title="Direct link to heading">‚Äã</a></h2><p><img alt="Woodpecker architecture" src="/assets/images/woodpecker-architecture-3929270c89a1fbf3a72f17aff8bd23e5.png"></p><h2 class="anchor anchorWithStickyNavbar_31ik" id="run-applications-from-terminal">Run applications from terminal<a aria-hidden="true" class="hash-link" href="#run-applications-from-terminal" title="Direct link to heading">‚Äã</a></h2><p>If you want to run a Woodpecker applications from your terminal you can use one of the following commands from the base of the Woodpecker project. They will execute Woodpecker in a similar way as described in <a href="#debugging-woodpecker">debugging Woodpecker</a> without the ability to really debug it in your editor.</p><div class="codeBlockContainer_K1bP language-bash"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># start server</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ go run ./cmd/server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># start agent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ go run ./cmd/agent</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># execute cli command</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ go run ./cmd/cli </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">command</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="add-new-migration">Add new migration<a aria-hidden="true" class="hash-link" href="#add-new-migration" title="Direct link to heading">‚Äã</a></h2><p>Woodpecker uses migrations to change the database schema if a database model has been changed.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>If you add a new property to a model, you dont have to do anything,
the column will be created based on the xorm tag automaticaly.
If you add a new model, you only have to add it to the <code>syncAll()</code> function at
<code>server/store/datastore/migration/migration.go</code> to get a table created.</p></div></div><p>If a developer for example removes a property <code>Counter</code> from the model <code>Repo</code> in <code>server/model/</code> they would need to add a new migration task like the following  example to a file like <code>server/store/datastore/migration/004_repos_drop_repo_counter.go</code>:</p><div class="codeBlockContainer_K1bP language-go"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">package</span><span class="token plain"> migration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;xorm.io/xorm&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> alterTableReposDropCounter </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> task</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;alter-table-drop-counter&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sess </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">xorm</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Session</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dropTableColumns</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sess</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;repos&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;repo_counter&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>warning</h5></div><div class="admonition-content"><p>Do not <code>sess.Begin()</code>, <code>sess.Commit()</code> or <code>sess.Close()</code> the session, it is managed from outside.</p></div></div><p>To automatically execute the migration after the start of the server, the new migration needs to be added to the end of <code>migrationTasks</code> in <code>server/store/datastore/migration/migration.go</code>.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Woodpecker uses <a href="https://xorm.io/" target="_blank" rel="noopener noreferrer">Xorm</a> as ORM for the database connection.
If you can find its documentation at <a href="https://gobook.io/read/gitea.com/xorm/manual-en-US" target="_blank" rel="noopener noreferrer">gobook.io/read/gitea.com/xorm</a>.</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/woodpecker-ci/woodpecker/edit/master/docs/docs/92-development.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/migrations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ <!-- -->Migrations</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preparation" class="table-of-contents__link toc-highlight">Preparation</a><ul><li><a href="#install-tools" class="table-of-contents__link toc-highlight">Install Tools</a></li><li><a href="#create-a-env-file-with-your-development-configuration" class="table-of-contents__link toc-highlight">Create a <code>.env</code> file with your development configuration</a></li><li><a href="#o-auth" class="table-of-contents__link toc-highlight">O-Auth</a></li></ul></li><li><a href="#developing-with-vs-code" class="table-of-contents__link toc-highlight">Developing with VS-Code</a><ul><li><a href="#debugging-woodpecker" class="table-of-contents__link toc-highlight">Debugging Woodpecker</a></li></ul></li><li><a href="#ui-development" class="table-of-contents__link toc-highlight">UI development</a><ul><li><a href="#tools-and-frameworks" class="table-of-contents__link toc-highlight">Tools and frameworks</a></li></ul></li><li><a href="#documentation-development" class="table-of-contents__link toc-highlight">Documentation development</a></li><li><a href="#testing--linting-code" class="table-of-contents__link toc-highlight">Testing &amp; linting code</a></li><li><a href="#package-architecture-of-woodpecker" class="table-of-contents__link toc-highlight">Package architecture of Woodpecker</a></li><li><a href="#run-applications-from-terminal" class="table-of-contents__link toc-highlight">Run applications from terminal</a></li><li><a href="#add-new-migration" class="table-of-contents__link toc-highlight">Add new migration</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/usage/intro">Usage</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/administration/setup">Server setup</a></li><li class="footer__item"><a class="footer__link-item" href="/faq">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/fcMQqSMXJy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://mastodon.technology/@WoodpeckerCI" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Mastodon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/woodpecker-ci/woodpecker" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://ci.woodpecker-ci.org/woodpecker-ci/woodpecker" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>CI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2021 Woodpecker CI. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.df671c88.js"></script>
<script src="/assets/js/main.44c3b900.js"></script>
</body>
</html>