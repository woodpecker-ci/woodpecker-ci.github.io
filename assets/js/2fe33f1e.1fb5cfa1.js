"use strict";(self.webpackChunkwoodpecker=self.webpackChunkwoodpecker||[]).push([["8703"],{17379:function(e,n,i){i.r(n),i.d(n,{frontMatter:()=>r,toc:()=>a,default:()=>u,metadata:()=>s,assets:()=>c,contentTitle:()=>l});var s=JSON.parse('{"id":"usage/extensions/index","title":"Extensions","description":"Woodpecker allows you to replace internal logic with external extensions by using pre-defined http endpoints.","source":"@site/docs/20-usage/72-extensions/index.md","sourceDirName":"20-usage/72-extensions","slug":"/usage/extensions/","permalink":"/docs/next/usage/extensions/","draft":false,"unlisted":false,"editUrl":"https://github.com/woodpecker-ci/woodpecker/edit/main/docs/docs/20-usage/72-extensions/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Volumes","permalink":"/docs/next/usage/volumes"},"next":{"title":"Configuration extension","permalink":"/docs/next/usage/extensions/configuration-extension"}}'),t=i(47259),o=i(50677);let r={},l="Extensions",c={},a=[{value:"Security",id:"security",level:2},{value:"Example extensions",id:"example-extensions",level:2},{value:"Configuration",id:"configuration",level:2}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"extensions",children:"Extensions"})}),"\n",(0,t.jsx)(n.p,{children:"Woodpecker allows you to replace internal logic with external extensions by using pre-defined http endpoints."}),"\n",(0,t.jsx)(n.p,{children:"There is currently one type of extension available:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/docs/next/usage/extensions/configuration-extension",children:"Configuration extension"})," to modify or generate pipeline configurations on the fly."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"security",children:"Security"}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"You need to trust the extensions as they are receiving private information like secrets and tokens and might return harmful\ndata like malicious pipeline configurations that could be executed."})}),"\n",(0,t.jsxs)(n.p,{children:["To prevent your extensions from such attacks, Woodpecker is signing all HTTP requests using ",(0,t.jsx)(n.a,{href:"https://tools.ietf.org/html/draft-cavage-http-signatures",children:"HTTP signatures"}),". Woodpecker therefore uses a public-private ed25519 key pair.\nTo verify the requests your extension has to verify the signature of all request using the public key with some library like ",(0,t.jsx)(n.a,{href:"https://github.com/yaronf/httpsign",children:"httpsign"}),".\nYou can get the public Woodpecker key by opening ",(0,t.jsx)(n.code,{children:"http://my-woodpecker.tld/api/signature/public-key"})," or by visiting the Woodpecker UI, going to you repo settings and opening the extensions page."]}),"\n",(0,t.jsx)(n.h2,{id:"example-extensions",children:"Example extensions"}),"\n",(0,t.jsxs)(n.p,{children:["A simplistic service providing endpoints for a config and secrets extension can be found here: ",(0,t.jsx)(n.a,{href:"https://github.com/woodpecker-ci/example-extensions",children:"https://github.com/woodpecker-ci/example-extensions"})]}),"\n",(0,t.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.jsxs)(n.p,{children:["To prevent extensions from calling local services by default only external hosts / ip-addresses are allowed. You can change this behavior by setting the ",(0,t.jsx)(n.code,{children:"WOODPECKER_EXTENSIONS_ALLOWED_HOSTS"})," environment variable. You can use a comma separated list of:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Built-in networks:\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"loopback"}),": 127.0.0.0/8 for IPv4 and ::1/128 for IPv6, localhost is included."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"private"}),": RFC 1918 (10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16) and RFC 4193 (FC00::/7). Also called LAN/Intranet."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"external"}),": A valid non-private unicast IP, you can access all hosts on public internet."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"*"}),": All hosts are allowed."]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["CIDR list: ",(0,t.jsx)(n.code,{children:"1.2.3.0/8"})," for IPv4 and ",(0,t.jsx)(n.code,{children:"2001:db8::/32"})," for IPv6"]}),"\n",(0,t.jsxs)(n.li,{children:["(Wildcard) hosts: ",(0,t.jsx)(n.code,{children:"example.com"}),", ",(0,t.jsx)(n.code,{children:"*.example.com"}),", ",(0,t.jsx)(n.code,{children:"192.168.100.*"})]}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},50677:function(e,n,i){i.d(n,{R:()=>r,x:()=>l});var s=i(96363);let t={},o=s.createContext(t);function r(e){let n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);