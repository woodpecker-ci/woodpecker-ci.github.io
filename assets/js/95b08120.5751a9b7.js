"use strict";(self.webpackChunkwoodpecker=self.webpackChunkwoodpecker||[]).push([["3555"],{83507:function(e,n,r){r.r(n),r.d(n,{default:()=>p,frontMatter:()=>c,metadata:()=>t,assets:()=>s,toc:()=>d,contentTitle:()=>a});var t=JSON.parse('{"id":"administration/advanced/ssl","title":"SSL","description":"Woodpecker supports SSL configuration by mounting certificates into your container.","source":"@site/versioned_docs/version-3.0/30-administration/40-advanced/20-ssl.md","sourceDirName":"30-administration/40-advanced","slug":"/administration/advanced/ssl","permalink":"/docs/administration/advanced/ssl","draft":false,"unlisted":false,"editUrl":"https://github.com/woodpecker-ci/woodpecker/edit/main/docs/versioned_docs/version-3.0/30-administration/40-advanced/20-ssl.md","tags":[],"version":"3.0","sidebarPosition":20,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Proxy","permalink":"/docs/administration/advanced/proxy"},"next":{"title":"Autoscaler","permalink":"/docs/administration/advanced/autoscaler"}}'),i=r("96773"),o=r("19282");let c={},a="SSL",s={},d=[{value:"Certificate Chain",id:"certificate-chain",level:2},{value:"Certificate Errors",id:"certificate-errors",level:2},{value:"Running in containers",id:"running-in-containers",level:2}];function l(e){let n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"ssl",children:"SSL"})}),"\n",(0,i.jsx)(n.p,{children:"Woodpecker supports SSL configuration by mounting certificates into your container."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",children:"WOODPECKER_SERVER_CERT=/etc/certs/woodpecker.example.com/server.crt\nWOODPECKER_SERVER_KEY=/etc/certs/woodpecker.example.com/server.key\n"})}),"\n",(0,i.jsx)(n.h2,{id:"certificate-chain",children:"Certificate Chain"}),"\n",(0,i.jsx)(n.p,{children:"The most common problem encountered is providing a certificate file without the intermediate chain."}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"LoadX509KeyPair reads and parses a public/private key pair from a pair of files. The files must contain PEM encoded data. The certificate file may contain intermediate certificates following the leaf certificate to form a certificate chain."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"certificate-errors",children:"Certificate Errors"}),"\n",(0,i.jsxs)(n.p,{children:["SSL support is provided using the ",(0,i.jsx)(n.a,{href:"https://golang.org/pkg/net/http/#ListenAndServeTLS",children:"ListenAndServeTLS"})," function from the Go standard library. If you receive certificate errors or warnings please examine your configuration more closely."]}),"\n",(0,i.jsx)(n.h2,{id:"running-in-containers",children:"Running in containers"}),"\n",(0,i.jsx)(n.p,{children:"Update your configuration to expose the following ports:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",metastring:'title="docker-compose.yaml"',children:" services:\n   woodpecker-server:\n     [...]\n     ports:\n+      - 80:80\n+      - 443:443\n       - 9000:9000\n"})}),"\n",(0,i.jsx)(n.p,{children:"Update your configuration to mount your certificate and key:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",metastring:'title="docker-compose.yaml"',children:" services:\n   woodpecker-server:\n     [...]\n     volumes:\n+      - /etc/certs/woodpecker.example.com/server.crt:/etc/certs/woodpecker.example.com/server.crt\n+      - /etc/certs/woodpecker.example.com/server.key:/etc/certs/woodpecker.example.com/server.key\n"})}),"\n",(0,i.jsx)(n.p,{children:"Update your configuration to provide the paths of your certificate and key:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",metastring:'title="docker-compose.yaml"',children:" services:\n   woodpecker-server:\n     [...]\n     environment:\n+      - WOODPECKER_SERVER_CERT=/etc/certs/woodpecker.example.com/server.crt\n+      - WOODPECKER_SERVER_KEY=/etc/certs/woodpecker.example.com/server.key\n"})})]})}function p(e={}){let{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},19282:function(e,n,r){r.d(n,{Z:function(){return a},a:function(){return c}});var t=r(41699);let i={},o=t.createContext(i);function c(e){let n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);