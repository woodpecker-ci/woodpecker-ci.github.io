"use strict";(self.webpackChunkwoodpecker=self.webpackChunkwoodpecker||[]).push([["9736"],{11052:function(e,t,n){let r=Symbol("Comlink.proxy"),i=Symbol("Comlink.endpoint"),a=Symbol("Comlink.releaseProxy"),l=Symbol("Comlink.finalizer"),s=Symbol("Comlink.thrown"),o=e=>"object"==typeof e&&null!==e||"function"==typeof e,c=new Map([["proxy",{canHandle:e=>o(e)&&e[r],serialize(e){let{port1:t,port2:n}=new MessageChannel;return u(e,t),[n,[n]]},deserialize:e=>(e.start(),function(e,t){let n=new Map;return e.addEventListener("message",function(e){let{data:t}=e;if(!t||!t.id)return;let r=n.get(t.id);if(r)try{r(t)}finally{n.delete(t.id)}}),function e(t,n,r=[],l=function(){}){let s=!1,o=new Proxy(l,{get(i,l){if(f(s),l===a)return()=>{h&&h.unregister(o),d(t),n.clear(),s=!0};if("then"===l){if(0===r.length)return{then:()=>o};let e=E(t,n,{type:"GET",path:r.map(e=>e.toString())}).then(b);return e.then.bind(e)}return e(t,n,[...r,l])},set(e,i,a){f(s);let[l,o]=w(a);return E(t,n,{type:"SET",path:[...r,i].map(e=>e.toString()),value:l},o).then(b)},apply(a,l,o){f(s);let c=r[r.length-1];if(c===i)return E(t,n,{type:"ENDPOINT"}).then(b);if("bind"===c)return e(t,n,r.slice(0,-1));let[u,p]=m(o);return E(t,n,{type:"APPLY",path:r.map(e=>e.toString()),argumentList:u},p).then(b)},construct(e,i){f(s);let[a,l]=m(i);return E(t,n,{type:"CONSTRUCT",path:r.map(e=>e.toString()),argumentList:a},l).then(b)}});return function(e,t){let n=(g.get(t)||0)+1;g.set(t,n),h&&h.register(e,t,e)}(o,t),o}(e,n,[],void 0)}(e))}],["throw",{canHandle:e=>o(e)&&s in e,serialize({value:e}){let t;return[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]]},deserialize(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function u(e,t=globalThis,n=["*"]){t.addEventListener("message",function i(a){let o;if(!a||!a.data)return;if(!function(e,t){for(let n of e)if(t===n||"*"===n||n instanceof RegExp&&n.test(t))return!0;return!1}(n,a.origin)){console.warn(`Invalid origin '${a.origin}' for comlink proxy`);return}let{id:c,type:f,path:d}=Object.assign({path:[]},a.data),g=(a.data.argumentList||[]).map(b);try{var h,m,E;let t=d.slice(0,-1).reduce((e,t)=>e[t],e),n=d.reduce((e,t)=>e[t],e);switch(f){case"GET":o=n;break;case"SET":t[d.slice(-1)[0]]=b(a.data.value),o=!0;break;case"APPLY":o=n.apply(t,g);break;case"CONSTRUCT":h=new n(...g),o=Object.assign(h,{[r]:!0});break;case"ENDPOINT":{let{port1:t,port2:n}=new MessageChannel;u(e,n),m=t,E=[t],y.set(m,E),o=m}break;case"RELEASE":o=void 0;break;default:return}}catch(e){o={value:e,[s]:0}}Promise.resolve(o).catch(e=>({value:e,[s]:0})).then(n=>{let[r,a]=w(n);t.postMessage(Object.assign(Object.assign({},r),{id:c}),a),"RELEASE"===f&&(t.removeEventListener("message",i),p(t),l in e&&"function"==typeof e[l]&&e[l]())}).catch(e=>{let[n,r]=w({value:TypeError("Unserializable return value"),[s]:0});t.postMessage(Object.assign(Object.assign({},n),{id:c}),r)})}),t.start&&t.start()}function p(e){"MessagePort"===e.constructor.name&&e.close()}function f(e){if(e)throw Error("Proxy has been released and is not useable")}function d(e){return E(e,new Map,{type:"RELEASE"}).then(()=>{p(e)})}let g=new WeakMap,h="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let t=(g.get(e)||0)-1;g.set(e,t),0===t&&d(e)});function m(e){var t;let n=e.map(w);return[n.map(e=>e[0]),(t=n.map(e=>e[1]),Array.prototype.concat.apply([],t))]}let y=new WeakMap;function w(e){for(let[t,n]of c)if(n.canHandle(e)){let[r,i]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:e},y.get(e)||[]]}function b(e){switch(e.type){case"HANDLER":return c.get(e.name).deserialize(e.value);case"RAW":return e.value}}function E(e,t,n,r){return new Promise(i=>{let a=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");t.set(a,i),e.start&&e.start(),e.postMessage(Object.assign({id:a},n),r)})}var v,k,x=n("57822"),I=n.n(x),T=n("14849");function S(e){return L(e).concat(L(e.filter(e=>{let t=e[e.length-1];return!t.trailing&&t.maybeTyping}),!0))}function L(e,t){return e.map(e=>({tokens:e.map(e=>e.value),term:e.map(e=>({value:e.value,presence:I().Query.presence.REQUIRED,wildcard:(t?e.trailing||e.maybeTyping:e.trailing)?I().Query.wildcard.TRAILING:I().Query.wildcard.NONE}))}))}(v=k||(k={}))[v.Title=0]="Title",v[v.Heading=1]="Heading",v[v.Description=2]="Description",v[v.Keywords=3]="Keywords",v[v.Content=4]="Content";let R=new Map;async function C(e,t){let n=`${e}${T.J.replace("{dir}",t?`-${t.replace(/\//g,"-")}`:"")}`;if(new URL(n,location.origin).origin!==location.origin)throw Error("Unexpected version url");let r=await (await fetch(n)).json();return{wrappedIndexes:r.map((e,t)=>{let{documents:n,index:r}=e;return{type:t,documents:n,index:I().Index.load(r)}}),zhDictionary:Array.from(r.reduce((e,t)=>{for(let n of t.index.invertedIndex)/\p{Unified_Ideograph}/u.test(n[0][0])&&e.add(n[0]);return e},new Set))}}u(class{async fetchIndexes(e,t){await this.lowLevelFetchIndexes(e,t)}async lowLevelFetchIndexes(e,t){let n=`${e}${t}`,r=R.get(n);return r||(r=C(e,t),R.set(n,r)),r}async search(e,t,n,r){let i=function(e,t){if(1===t.length&&["ja","jp","th"].includes(t[0]))return I()[t[0]].tokenizer(e).map(e=>e.toString());let n=/[^-\s]+/g;return t.includes("zh")&&(n=/\w+|\p{Unified_Ideograph}+/gu),e.toLowerCase().match(n)||[]}(n,T.dK);if(0===i.length)return[];let{wrappedIndexes:a,zhDictionary:l}=await this.lowLevelFetchIndexes(e,t),s=function(e,t){let n;let r=function(e,t){let n=e.map(e=>/\p{Unified_Ideograph}/u.test(e)?function(e,t){let n=[];return!function e(r,i){let a=0,l=!1;for(let s of t)if(r.substr(0,s.length)===s){let t={missed:i.missed,term:i.term.concat({value:s})};r.length>s.length?e(r.substr(s.length),t):n.push(t),l=!0}else for(let t=s.length-1;t>a;t-=1){let o=s.substr(0,t);if(r.substr(0,t)===o){a=t;let s={missed:i.missed,term:i.term.concat({value:o,trailing:!0})};r.length>t?e(r.substr(t),s):n.push(s),l=!0;break}}!l&&(r.length>0?e(r.substr(1),{missed:i.missed+1,term:i.term}):i.term.length>0&&n.push(i))}(e,{missed:0,term:[]}),n.sort((e,t)=>{let n=e.missed>0?1:0,r=t.missed>0?1:0;return n!==r?n-r:e.term.length-t.term.length}).map(e=>e.term)}(e,t):[{value:e}]).slice(0,12),r=n.filter(e=>e.length>1),i=1,a=!1;for(let e of r)if(a)e.splice(1,e.length-1);else{e.length>6&&e.splice(6,e.length-6);let t=i*e.length;if(t>=12){if(t>12){let t=Math.floor(12/i);e.splice(t,e.length-t),i*=t}else i=t;i>6&&(a=!0)}else i=t}let l=[];return!function e(t,r){if(t===n.length||r.length>=12){l.push(r.slice(0,12));return}for(let i of n[t])e(t+1,r.concat(i))}(0,[]),l}(e,t);if(0===r.length)return[{tokens:e,term:e.map(e=>({value:e,presence:I().Query.presence.REQUIRED,wildcard:I().Query.wildcard.LEADING|I().Query.wildcard.TRAILING}))}];for(let e of r)e[e.length-1].maybeTyping=!0;let i=[];for(let e of T.dK)if("en"===e)T._k||i.unshift(I().stopWordFilter);else{let t=I()[e];t.stopWordFilter&&i.unshift(t.stopWordFilter)}if(i.length>0){let e=e=>i.reduce((e,t)=>e.filter(e=>t(e.value)),e);n=[];let t=[];for(let i of r){let r=e(i);n.push(r),r.length<i.length&&r.length>0&&t.push(r)}r.push(...t)}else n=r.slice();let a=[];for(let e of n)if(e.length>2)for(let t=e.length-1;t>=0;t-=1)a.push(e.slice(0,t).concat(e.slice(t+1)));return S(r).concat(S(a))}(i,l),o=[];e:for(let{term:e,tokens:t}of s)for(let{documents:n,index:i,type:l}of a)if(o.push(...i.query(t=>{for(let n of e)t.term(n.value,{wildcard:n.wildcard,presence:n.presence})}).slice(0,r).filter(e=>!o.some(t=>t.document.i.toString()===e.ref)).slice(0,r-o.length).map(e=>{let r=n.find(t=>t.i.toString()===e.ref);return{document:r,type:l,page:l!==k.Title&&a[0].documents.find(e=>e.i===r.p),metadata:e.matchData.metadata,tokens:t,score:e.score}})),o.length>=r)break e;return o.forEach((e,t)=>{e.index=t}),o.sort((e,t)=>{let n=(e.type===k.Heading||e.type===k.Content||e.type===k.Description)&&e.page?o.findIndex(t=>t.document===e.page):e.index,r=(t.type===k.Heading||t.type===k.Content||t.type===k.Description)&&t.page?o.findIndex(e=>e.document===t.page):t.index;if(-1===n&&(n=e.index),-1===r&&(r=t.index),n===r){let n=(0===t.type?1:0)-(0===e.type?1:0);return 0===n?e.index-t.index:n}return n-r}),!function(e){e.forEach((t,n)=>{n>0&&t.page&&e.slice(0,n).some(e=>(e.type===k.Keywords?e.page:e.document)===t.page)&&(n<e.length-1&&e[n+1].page===t.page?t.isInterOfTree=!0:t.isLastOfTree=!0)})}(o),o}})}}]);