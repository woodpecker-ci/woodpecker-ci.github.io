"use strict";(self.webpackChunkwoodpecker=self.webpackChunkwoodpecker||[]).push([["205"],{61976:function(e,n,o){o.r(n),o.d(n,{default:()=>p,frontMatter:()=>a,metadata:()=>t,assets:()=>c,toc:()=>l,contentTitle:()=>s});var t=JSON.parse('{"id":"administration/installation/packages","title":"Distribution packages","description":"Official packages","source":"@site/versioned_docs/version-3.4/30-administration/05-installation/30-packages.md","sourceDirName":"30-administration/05-installation","slug":"/administration/installation/packages","permalink":"/docs/3.4/administration/installation/packages","draft":false,"unlisted":false,"editUrl":"https://github.com/woodpecker-ci/woodpecker/edit/main/docs/versioned_docs/version-3.4/30-administration/05-installation/30-packages.md","tags":[],"version":"3.4","sidebarPosition":30,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Helm Chart","permalink":"/docs/3.4/administration/installation/helm-chart"},"next":{"title":"Server","permalink":"/docs/3.4/administration/configuration/server"}}'),r=o("74132"),i=o("13243");let a={},s="Distribution packages",c={},l=[{value:"Official packages",id:"official-packages",level:2},{value:"Community packages",id:"community-packages",level:2},{value:"NixOS",id:"nixos",level:3}];function d(e){let n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"distribution-packages",children:"Distribution packages"})}),"\n",(0,r.jsx)(n.h2,{id:"official-packages",children:"Official packages"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"DEB"}),"\n",(0,r.jsx)(n.li,{children:"RPM"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["The pre-built packages are available on the ",(0,r.jsx)(n.a,{href:"https://github.com/woodpecker-ci/woodpecker/releases/latest",children:"GitHub releases"})," page. The packages can be installed using the package manager of your distribution."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-Shell",children:"# Debian/Ubuntu\ncurl -L https://github.com/woodpecker-ci/woodpecker/releases/download/${RELEASE_VERSION}/woodpecker_${RELEASE_VERSION}_amd64.deb -o woodpecker-server.deb\nsudo apt --fix-broken install ./woodpecker-server.deb\n\n# CentOS/RHEL\nsudo dnf install https://github.com/woodpecker-ci/woodpecker/releases/download/${RELEASE_VERSION}/woodpecker_${RELEASE_VERSION}_amd64.rpm\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The package installation will create a systemd service file for the Woodpecker server and agent along with an example environment file. To configure the server, copy the example environment file ",(0,r.jsx)(n.code,{children:"/etc/woodpecker/woodpecker-server.env.example"})," to ",(0,r.jsx)(n.code,{children:"/etc/woodpecker/woodpecker-server.env"})," and adjust the values."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",metastring:'title="/usr/local/lib/systemd/system/woodpecker-server.service"',children:"[Unit]\nDescription=WoodpeckerCI server\nDocumentation=https://woodpecker-ci.org/docs/administration/server-config\nRequires=network.target\nAfter=network.target\nConditionFileNotEmpty=/etc/woodpecker/woodpecker-server.env\nConditionPathExists=/etc/woodpecker/woodpecker-server.env\n\n[Service]\nType=simple\nEnvironmentFile=/etc/woodpecker/woodpecker-server.env\nUser=woodpecker\nGroup=woodpecker\nExecStart=/usr/local/bin/woodpecker-server\nWorkingDirectory=/var/lib/woodpecker/\nStateDirectory=woodpecker\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="/etc/woodpecker/woodpecker-server.env"',children:"WOODPECKER_OPEN=true\nWOODPECKER_HOST=${WOODPECKER_HOST}\nWOODPECKER_GITHUB=true\nWOODPECKER_GITHUB_CLIENT=${WOODPECKER_GITHUB_CLIENT}\nWOODPECKER_GITHUB_SECRET=${WOODPECKER_GITHUB_SECRET}\nWOODPECKER_AGENT_SECRET=${WOODPECKER_AGENT_SECRET}\n"})}),"\n",(0,r.jsxs)(n.p,{children:["After installing the agent, copy the example environment file ",(0,r.jsx)(n.code,{children:"/etc/woodpecker/woodpecker-agent.env.example"})," to ",(0,r.jsx)(n.code,{children:"/etc/woodpecker/woodpecker-agent.env"})," and adjust the values as well. The agent will automatically register itself with the server."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",metastring:'title="/usr/local/lib/systemd/system/woodpecker-agent.service"',children:"[Unit]\nDescription=WoodpeckerCI agent\nDocumentation=https://woodpecker-ci.org/docs/administration/agent-config\nRequires=network.target\nAfter=network.target\nConditionFileNotEmpty=/etc/woodpecker/woodpecker-agent.env\nConditionPathExists=/etc/woodpecker/woodpecker-agent.env\n\n[Service]\nType=simple\nEnvironmentFile=/etc/woodpecker/woodpecker-agent.env\nUser=woodpecker\nGroup=woodpecker\nExecStart=/usr/local/bin/woodpecker-agent\nWorkingDirectory=/var/lib/woodpecker/\nStateDirectory=woodpecker\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",metastring:'title="/etc/woodpecker/woodpecker-agent.env"',children:"WOODPECKER_SERVER=localhost:9000\nWOODPECKER_AGENT_SECRET=${WOODPECKER_AGENT_SECRET}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"community-packages",children:"Community packages"}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsx)(n.p,{children:"Woodpecker itself is not responsible for creating these packages. Please reach out to the people responsible for packaging Woodpecker for the individual distributions."})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://pkgs.alpinelinux.org/packages?name=woodpecker&branch=edge&repo=&arch=&maintainer=",children:"Alpine (Edge)"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://archlinux.org/packages/?q=woodpecker",children:"Arch Linux"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://software.opensuse.org/package/woodpecker",children:"openSUSE"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://apps.yunohost.org/app/woodpecker",children:"YunoHost"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.cloudron.io/store/org.woodpecker_ci.cloudronapp.html",children:"Cloudron"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"nixos",children:"NixOS"}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["This module is not maintained by the Woodpecker developers.\nIf you experience issues please open a bug report in the ",(0,r.jsx)(n.a,{href:"https://github.com/NixOS/nixpkgs/issues/new/choose",children:"nixpkgs repo"})," where the module is maintained."]})}),"\n",(0,r.jsx)(n.p,{children:"In theory, the NixOS installation is very similar to the binary installation and supports multiple backends.\nIn practice, the settings are specified declaratively in the NixOS configuration and no manual steps need to be taken."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nix",children:'{ config\n, ...\n}:\nlet\n  domain = "woodpecker.example.org";\nin\n{\n  # This automatically sets up certificates via let\'s encrypt\n  security.acme.defaults.email = "acme@example.com";\n  security.acme.acceptTerms = true;\n  security.acme.certs."${domain}" = { };\n\n  # Setting up a nginx proxy that handles tls for us\n  networking.firewall.allowedTCPPorts = [ 80 443 ];\n  services.nginx = {\n    enable = true;\n    recommendedTlsSettings = true;\n    recommendedOptimisation = true;\n    recommendedProxySettings = true;\n    virtualHosts."${domain}" = {\n      enableACME = true;\n      forceSSL = true;\n      locations."/" = {\n        proxyPass = "http://localhost:3007";\n      };\n    };\n  };\n\n  services.woodpecker-server = {\n    enable = true;\n    environment = {\n      WOODPECKER_HOST = "https://${domain}";\n      WOODPECKER_SERVER_ADDR = ":3007";\n      WOODPECKER_OPEN = "true";\n    };\n    # You can pass a file with env vars to the system it could look like:\n    # WOODPECKER_AGENT_SECRET=XXXXXXXXXXXXXXXXXXXXXX\n    environmentFile = "/path/to/my/secrets/file";\n  };\n\n  # This sets up a woodpecker agent\n  services.woodpecker-agents.agents."docker" = {\n    enable = true;\n    # We need this to talk to the podman socket\n    extraGroups = [ "podman" ];\n    environment = {\n      WOODPECKER_SERVER = "localhost:9000";\n      WOODPECKER_MAX_WORKFLOWS = "4";\n      DOCKER_HOST = "unix:///run/podman/podman.sock";\n      WOODPECKER_BACKEND = "docker";\n    };\n    # Same as with woodpecker-server\n    environmentFile = [ "/var/lib/secrets/woodpecker.env" ];\n  };\n\n  # Here we setup podman and enable dns\n  virtualisation.podman = {\n    enable = true;\n    defaultNetwork.settings = {\n      dns_enabled = true;\n    };\n  };\n  # This is needed for podman to be able to talk over dns\n  networking.firewall.interfaces."podman0" = {\n    allowedUDPPorts = [ 53 ];\n    allowedTCPPorts = [ 53 ];\n  };\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["All configuration options can be found via ",(0,r.jsx)(n.a,{href:"https://search.nixos.org/options?channel=unstable&size=200&sort=relevance&query=woodpecker",children:"NixOS Search"}),". There are also some additional resources on how to utilize Woodpecker more effectively with NixOS on the ",(0,r.jsx)(n.a,{href:"/awesome",children:"Awesome Woodpecker"})," page, like using the runners nix-store in the pipeline."]})]})}function p(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},13243:function(e,n,o){o.d(n,{Z:function(){return s},a:function(){return a}});var t=o(39546);let r={},i=t.createContext(r);function a(e){let n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);